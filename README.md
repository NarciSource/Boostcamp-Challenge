# ë¶€ìŠ¤íŠ¸ìº í”„ ì±Œë¦°ì§€ Day11. ì ‘ìˆ˜ ì´ë²¤íŠ¸

## ë‚˜ë§Œì˜ ì²´í¬í¬ì¸íŠ¸

-   [x] ê°ì²´ ì‹ë³„
-   [x] ë™ìž‘ì˜ˆì‹œ í•´ì„ ðŸ˜’
-   [x] ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ëž¨
-   [x] ìŠˆë„ ì½”ë“œ

### 1ë‹¨ê³„. ì ‘ìˆ˜ ì´ë²¤íŠ¸

-   [ ] ì§ì ‘ ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ë©´ ì•ˆë˜ê³ , Eventë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì²˜ë¦¬í•˜ë„ë¡ êµ¬í˜„í•œë‹¤.

-   [ ] _ì ‘ìˆ˜ ê¸°ê³„_(POS)ëŠ” ì ‘ìˆ˜ë¥¼ **ì—°ì†í•´ì„œ** ë°›ì„ ìˆ˜ ìžˆë‹¤.

    -   [ ] ì ‘ìˆ˜ë¥¼ ë°›ìœ¼ë©´ _ì ‘ìˆ˜ ëŒ€ê¸°í_(Queue)ì— _ì¶”ê°€í•œë‹¤_.

-   [ ] ëŒ€ê¸°íì— ë“¤ì–´ìžˆëŠ” ì´ë²¤íŠ¸ë¥¼ êº¼ë‚´ì„œ ì²˜ë¦¬í•˜ëŠ” **ì´ë²¤íŠ¸ ë£¨í¼**(Looper)ë¥¼ ë³„ë„ ëª¨ë“ˆ/ê°ì²´ë¡œ ë¶„ë¦¬í•´ì„œ êµ¬í˜„í•œë‹¤.

-   [ ] _ì ‘ìˆ˜ ë§¤ë‹ˆì €_(Manager)ëŠ” **ì£¼ê¸°ì ìœ¼ë¡œ** ì ‘ìˆ˜ ëŒ€ê¸°íì—ì„œ ì´ë²¤íŠ¸ë¥¼ _í™•ì¸í•œë‹¤_.

    -   [ ] ì ‘ìˆ˜ ëŒ€ê¸°ê°€ ìžˆì„ ê²½ìš°, *ë¬¼ë¥˜ ì„¼í„° í*ì— ë¬¼í’ˆ ì´ë²¤íŠ¸ë¥¼ _ì „ë‹¬í•œë‹¤_. &rarr; publish

    -   [ ] í•„ìš”í•˜ë©´ ë§¤ë‹ˆì €(Manager)ë„ ë°°ì†¡ í˜„í™©íŒì„ í‘œì‹œí•  ì´ë²¤íŠ¸ë¥¼ ì „ë‹¬í•  ìˆ˜ ìžˆë‹¤.

-   [ ] *ìž‘ì—…ìž*ëŠ” ë¬¼í’ˆ ë¶„ë¥˜í•˜ê¸° ì‹œìž‘í•  ë•Œì™€ ëë‚  ë•Œ ë§ˆë‹¤ ì´ë²¤íŠ¸ë¥¼ ë°œìƒí•œë‹¤.

    -   ë¬¼ë¥˜ ì„¼í„°ë³„ ìž‘ì—…ìžëŠ” í•œ ë²ˆì— 1ê°œ ë¬¼í’ˆì„ ë¶„ë¥˜í•  ìˆ˜ ìžˆë‹¤ê³  ê°€ì •í•œë‹¤.

-   [ ] *ë°°ë‹¬ ê¸°ì‚¬*ë„ ë¬¼í’ˆì„ ë°°ì†¡ ì‹œìž‘í•  ë•Œì™€ ëë‚  ë•Œ ë§ˆë‹¤ ì´ë²¤íŠ¸ë¥¼ ë°œìƒí•œë‹¤.

    -   ë°°ë‹¬ ê¸°ì‚¬ëŠ” í•œ ë²ˆì— 1ê°œê¹Œì§€ ë¬¼í’ˆë§Œ ë°°ë‹¬í•  ìˆ˜ ìžˆë‹¤ê³  ê°€ì •í•œë‹¤.

    -   ë°°ë‹¬ì€ ê±°ë¦¬ì™€ ìƒê´€ì—†ì´ ë™ì¼í•˜ê²Œ 10ë¶„ì”© ê±¸ë¦°ë‹¤ê³  ê°€ì •í•œë‹¤.

-   [ ] _íƒë°° í˜„í™©íŒ_(DashBoard)ëŠ” ì „ì²´ íƒë°° í˜„í™©ì„ ì£¼ê¸°ì ìœ¼ë¡œ í™”ë©´ì— ì¶œë ¥í•œë‹¤.

    -   [ ] ì ‘ìˆ˜í•œ ë¬¼í’ˆì— ëŒ€í•´ ëŒ€ê¸°ì¤‘/ë¶„ë¥˜ì¤‘/ë°°ì†¡ì¤‘/ë°°ì†¡ì™„ë£Œ ìƒíƒœë¥¼ í‘œì‹œí•œë‹¤.

## ë¬¸ì œ í•´ê²° ê³¼ì •

### ê°ì²´ ì‹ë³„

-   Looper ì´ë²¤íŠ¸ ë£¨í¼
-   Manager ì ‘ìˆ˜ ë§¤ë‹ˆì € - ì´ë²¤íŠ¸ ê´€ë¦¬
    -   ready_queue ì ‘ìˆ˜ í
    -   logistics_queue ë¬¼ë¥˜ ì„¼í„° í
    -
-   POS ì ‘ìˆ˜ê¸°ê³„ - ì´ë²¤íŠ¸ ë“±ë¡
-   Sorting_Worker ë¶„ë¥˜ ìž‘ì—…ìž
-   Delivery_Worker ë°°ë‹¬ ê¸°ì‚¬
-   DashBoard í˜„í™©íŒ

### ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ëž¨

```mermaid
sequenceDiagram
    participant POS
    participant ready_queue
    participant Manager
    participant logistics_queue
    participant Sorting_Worker
    participant Delivery_Worker

    loop reception
        POS->>ready_queue: parcel
    end

    loop check event
        Manager->>ready_queue: check()
        alt parcel exists
            ready_queue->>Manager: response(parcel)
            Manager->>logistics_queue: unclassified_parcel
        end
    end

    loop parcel classify
        alt If unclassified_parcel exists
            Manager->>Sorting_Worker: alarm()
            Sorting_Worker->>logistics_queue: get(1)
            logistics_queue->>Sorting_Worker: unclassified_parcel
            Sorting_Worker->>Sorting_Worker: classify()
            Sorting_Worker->>logistics_queue: classified_parcel
        end
    end

    loop parcel deliver
        alt If awaiting delivery_parcels exist
            Manager->>Delivery_Worker: alarm()
            alt If available delivery worker exists
                Delivery_Worker->>logistics_queue: get(1)
                logistics_queue->>Delivery_Worker: delivery_parcel
                Delivery_Worker->>Delivery_Worker: deliver()
            end
        end
    end
```

### pseudo code

```js
POS
    ready_queue <- input parcel

Manager
    ready_queue
    delivery_queue
    sorting_workers: subscribers
    delivery_workers: subscribers

    function notify
        while unclassified_parcel <- ready_queue.pop
            sorting_workers
                filter free
            then alarm()

        while delivery_parcel <- delivery_queue.pop
            delivery_workers
                filter free
            then alarm()

Worker
    function alarm
        parcel <- get()
        result <- work( parcel )
        post( result )

Sorting_Worker extends Worker
Delivery_Worker extends Worker

```

## í•™ìŠµ ë©”ëª¨
