# ë¶€ìŠ¤íŠ¸ìº í”„ ì±Œë¦°ì§€ Day16. íŒŒì¼ë°ì´í„° ì‹œìŠ¤í…œ

## ë‚˜ë§Œì˜ ì²´í¬í¬ì¸íŠ¸

### ê¸°ëŠ¥ìš”êµ¬ì‚¬í•­

-   [x] CSV íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì„ ìš°ì„ ì ìœ¼ë¡œ ê³ ë ¤í•œë‹¤. ì™¸ë¶€ì—ì„œ CSV íŒŒì¼ë§Œ ìˆ˜ì •í•œ ê²½ìš°ì—ë„ í˜•ì‹ì— ë§ìœ¼ë©´ ë™ì‘í•´ì•¼ í•œë‹¤.

-   í”„ë¡œê·¸ë¨ì„ ì‹œì‘í•˜ë©´ í”„ë¡¬í”„íŠ¸ì—ì„œ _BTTP ìš”ì²­_ ì„ í¬í•¨í•˜ëŠ” íŒŒì¼ì´ë¦„ì„ ì…ë ¥ë°›ëŠ”ë‹¤. ë°˜ë³µí•´ì„œ íŒŒì¼ì„ ì½ê³  ìš”ì²­ ë‚´ìš©ì— ë§ëŠ” ë™ì‘ì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ ì¶œë ¥í•´ì•¼ í•œë‹¤.

    -   [x] cli êµ¬í˜„

    -   [x] run insert.success.bttp ì…ë ¥í•  ê²½ìš° insert.success.bttp íŒŒì¼ì„ ì½ê³  í•´ë‹¹ ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤.
    -   [x] ë§Œì•½ íŒŒì¼ì´ ì—†ì„ ê²½ìš° ë‹¤ì‹œ ì…ë ¥ë°›ë„ë¡ ì²˜ë¦¬í•œë‹¤.
    -   [x] íŒŒì¼ í™•ì¥ìëŠ” í”Œë«í¼ì— ë§ì¶°ì„œ ë°”ê¿”ë„ ë˜ì§€ë§Œ, í…ìŠ¤íŠ¸ íŒŒì¼ í˜•ì‹ìœ¼ë¡œ ì§ì ‘ ì‘ì„±í•œë‹¤.
    -   [x] *íŒŒì¼ì—ì„œ ì½ì€ ë‚´ìš©*ì€ >>>>>>>> ì´í›„ì— ì¶œë ¥í•˜ê³ , ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì€ <<<<<<<< ì´í›„ì— ì¶œë ¥í•œë‹¤. (ì´ ë¶€ë¶„ì€ ìš”ì²­ê³¼ ì‘ë‹µì„ êµ¬ë¶„í•  ìˆ˜ ìˆë„ë¡ ê°ì ë³€ê²½í•´ë„ ë¬´ë°©í•˜ë‹¤.)

-   ë‹¤ìŒê³¼ ê°™ì€ _BTTP ìš”ì²­ê³¼ ì‘ë‹µ_ ì„ ì§€ì›í•˜ë„ë¡ êµ¬í˜„í•´ì•¼ í•œë‹¤.

    -   [x] BTTP ìš”ì²­
            ëª¨ë“  ìš”ì²­ì€ í•œ ì¤„ì´ ëë‚  ë•Œ \n íŠ¹ìˆ˜ë¬¸ìë¡œ ì¤„ë°”ê¿ˆì„ ëª…ì‹œí•˜ë©° ìš”ì²­ ë¬¸ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  
             1. ì²« ì¤„ì€ ìš”ì²­ ì¢…ë¥˜+í…Œì´ë¸” ì´ë¦„+BTTP í˜•ì‹  
             2. ë‘˜ì§¸ ì¤„ë¶€í„°ëŠ” ìš”ì²­ë§ˆë‹¤ í•„ìš”í•œ í•­ëª©ì„ í•œ ì¤„ì— í•˜ë‚˜ì”© í¬í•¨í•œë‹¤.

    -   [x] BTTP ì‘ë‹µ
            ëª¨ë“  ì‘ë‹µì€ í•œ ì¤„ì´ ëë‚  ë•Œ \n íŠ¹ìˆ˜ë¬¸ìë¡œ ì¤„ë°”ê¿ˆì„ ëª…ì‹œí•˜ë©° ì‘ë‹µ ë¬¸ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  
             1. ì²« ì¤„ì€ ì‘ë‹µ ì½”ë“œ+ì„¤ëª… ë¬¸êµ¬  
             2. ë‘˜ì§¸ ì¤„ë¶€í„° ì¶”ê°€ì ì¸ ë°ì´í„°ë¥¼ í•œ ì¤„ì— í•˜ë‚˜ì”© í¬í•¨í•œë‹¤.

        -   [x] ì¼ë¶€ ëª…ë ¹ì˜ ê²½ìš°ëŠ” JSON ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ì•¼ í•œë‹¤. ë§Œì•½ JSON ë°ì´í„°ê°€ í¬í•¨ë  ê²½ìš°ëŠ” Content-Type ê³¼ Content-Lengthë¥¼ í—¤ë”ì— ì¶”ê°€í•œë‹¤.

        -   [x] ë°ì´í„°ê°€ í¬í•¨ë  ê²½ìš°ëŠ” í—¤ë”ì™€ ë³¸ë¬¸ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•´ì„œ ë¹ˆ ì¤„ì„ í•˜ë‚˜ í¬í•¨í•œë‹¤.

        -   *ì‘ë‹µ ì½”ë“œ*ëŠ” 100, 200, 300, 400, 500 ë²”ìœ„ë¡œ ë‚˜ëˆ ì§„ë‹¤.
            1. [x] 100 ì½”ë“œëŠ” SELECT ì‹œì ì— ë ˆì½”ë“œê°€ ì—†ëŠ” ê²½ìš° ì‘ë‹µí•œë‹¤.
            2. [x] ì„±ê³µí•œ ê²½ìš°ëŠ” 200 ì½”ë“œë¥¼ ì‘ë‹µí•œë‹¤.
            3. [x] ëª…ë ¹ì— ì…ë ¥í•œ í…Œì´ë¸” íŒŒì¼ì´ ì—†ëŠ” ê²½ìš°ëŠ” 300 ì—ëŸ¬ë¥¼ ì‘ë‹µí•œë‹¤.
            4. [x] ëª…ë ¹ì— í•„ìš”í•œ ì»¬ëŸ¼ ê°œìˆ˜ê°€ ì¼ì¹˜í•˜ì§€ ì•Šì€ ê²½ìš° 400 ì—ëŸ¬ë¥¼ ì‘ë‹µí•œë‹¤.
            5. [x] ëª…ë ¹ì— ì…ë ¥í•œ ì»¬ëŸ¼ ì´ë¦„ì´ ì—†ì„ ê²½ìš°ëŠ” 401 ì—ëŸ¬ë¥¼ ì‘ë‹µí•œë‹¤.
            6. [x] 402 ì—ëŸ¬
            7. [x] 409 ì—ëŸ¬
            8. [x] ê·¸ ì™¸ ëª…ë ¹ì„ í•´ì„í•  ìˆ˜ ì—†ë‹¤ë©´ 500 ì—ëŸ¬ë¥¼ ì‘ë‹µí•œë‹¤.

-   [x] ë©”íƒ€ë°ì´í„°

### í”„ë¡œê·¸ë˜ë° ìš”êµ¬ì‚¬í•­

1.  CREATE ìš”ì²­

    ```sql
    CREATE table_name BTTP
    Column: column1=datatype
    ```

    -   [x] í…Œì´ë¸”ì„ ìƒì„±í•  ë•Œ í…Œì´ë¸” ì´ë¦„(table_name)ê³¼ ë™ì¼í•œ CSV íŒŒì¼ì„ ìƒì„±í•œë‹¤.
    -   [x] ì§€ì›í•˜ëŠ” datatypeì€ ìˆ«ì Numeric, ë¬¸ìì—´ String ë§Œ ì§€ì›í•œë‹¤.
    -   [x] ì»¬ëŸ¼ì€ 1ê°œë¶€í„° ìµœëŒ€ 9ê°œê¹Œì§€ë§Œ ì§€ì›í•œë‹¤. ë©€í‹°ë¼ì¸ì€ ì§€ì›í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
    -   [x] ë‚´ë¶€ì ìœ¼ë¡œ Record ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•Šë„ë¡ Numeric íƒ€ì… id ì»¬ëŸ¼ì„ ì¶”ê°€í•œë‹¤. ë‹¤ë¥¸ ê°’ì€ ì¤‘ë³µ ê°€ëŠ¥í•˜ë‹¤ê³  ê°€ì •í•œë‹¤.
    -   [x] ì»¬ëŸ¼ ì´ë¦„ì€ ë„ì–´ì“°ê¸°ë¥¼ ì§€ì›í•˜ì§€ ì•Šê³ , idë¼ëŠ” ì»¬ëŸ¼ì€ ì¶”ê°€í•  ìˆ˜ ì—†ë‹¤.
    -   [x] ëª¨ë“  ì»¬ëŸ¼ì€ not nullë¡œ ê°€ì •í•œë‹¤.
    -   [x] ë§Œì•½ ì´ë¯¸ íŒŒì¼ì´ ìˆìœ¼ë©´ ì‘ë‹µì— ì‹¤íŒ¨ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•œë‹¤.  
             í•„ìš”í•˜ë‹¤ë©´ ì—ëŸ¬ ì½”ë“œë¥¼ ì ì ˆí•˜ê²Œ ì¶”ê°€í•´ë„ ë¬´ë°©í•˜ë‹¤.

2.  INSERT ìš”ì²­

    ```sql
    INSERT table_name BTTP
    Column: column1
    Value: value1
    ```

    -   [x] ëª¨ë“  ì»¬ëŸ¼ì€ not nullë¡œ ê°€ì •í•˜ê³  í…Œì´ë¸”ì— ì»¬ëŸ¼ ê°¯ìˆ˜ì™€ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ì‹¤íŒ¨ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•œë‹¤.
    -   [x] Column ìˆœì„œì™€ Value ìˆœì„œëŠ” ë™ì¼í•˜ë‹¤ê³  ê°€ì •í•˜ë©°, í…Œì´ë¸” ì»¬ëŸ¼ ê°œìˆ˜ì™€ëŠ” ì¼ì¹˜í•´ì•¼ í•œë‹¤.
    -   [x] id ê°’ì€ 1ë¶€í„° ì‹œì‘í•´ì„œ INSERT í•  ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ +1 í•˜ë‚˜ì”© ì¦ê°€í•œë‹¤.
    -   [x] valueì— ëŒ€í•´ì„œëŠ” ìˆ«ìëŠ” ë”°ì˜´í‘œê°€ ì—†ê³ , ë¬¸ìì—´ì€ ë”°ì˜´í‘œê°€ ìˆì–´ì•¼ í•œë‹¤.
    -   [x] ì„±ê³µí•œ ê²½ìš°ëŠ” ì¶”ê°€í•œ ë ˆì½”ë“œ ê°’ì„ ì‘ë‹µì— í‘œì‹œí•œë‹¤.

3.  DELETE ìš”ì²­

    ```sql
    DELETE table_name BTTP
    Condition: condition
    ```

    -   [x] í…Œì´ë¸”ì—ì„œ condition ì¡°ê±´ì´ ë§ëŠ” ë ˆì½”ë“œë¥¼ ì‚­ì œí•œë‹¤.
    -   [x] condition ì€ ì»¬ëŸ¼ ì¤‘ì— í•˜ë‚˜ë§Œ ë„£ì„ ìˆ˜ ìˆë‹¤. (AND, OR ë“± ë³µì¡í•œ ì¡°ê±´ì€ ì§€ì›í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.)
    -   [x] ì¡°ê±´ì— ë§ëŠ” ë ˆì½”ë“œê°€ ì—†ìœ¼ë©´ ì‹¤íŒ¨ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•œë‹¤.
    -   [x] ì„±ê³µí•œ ê²½ìš°ëŠ” ì‚­ì œí•œ ë ˆì½”ë“œ ëª¨ë“  ê°’ì„ ì¶œë ¥í•œë‹¤.

4.  UPDATE ìš”ì²­

    ```sql
    UPDATE table_name BTTP
    Column: column1
    Value: value1
    Condition: condition
    ```

    -   [x] í…Œì´ë¸”ì—ì„œ condition ì¡°ê±´ì´ ë§ëŠ” ë ˆì½”ë“œì— íŠ¹ì • ì»¬ëŸ¼ ê°’ì„ ë³€ê²½í•œë‹¤. ì´ ë•Œ ì»¬ëŸ¼ì€ 1ê°œë§Œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
    -   [x] condition ì€ ì»¬ëŸ¼ ì¤‘ì— í•˜ë‚˜ë§Œ ë„£ì„ ìˆ˜ ìˆë‹¤.
    -   [x] ì¡°ê±´ì— ë§ëŠ” ë ˆì½”ë“œê°€ ì—†ìœ¼ë©´ ì‹¤íŒ¨ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•œë‹¤.
    -   [x] ì„±ê³µí•œ ê²½ìš°ëŠ” ë³€ê²½ëœ ë ˆì½”ë“œ ëª¨ë“  ê°’ì„ ì¶œë ¥í•œë‹¤.

5.  SELECT ìš”ì²­

    ```sql
    SELECT table_name BTTP
    Condition: condition
    ```

    -   [x] í…Œì´ë¸”ì—ì„œ condition ì¡°ê±´ì´ ë§ëŠ” ë ˆì½”ë“œì— ëª¨ë“  ë ˆì½”ë“œì˜ ëª¨ë“  ì»¬ëŸ¼ì„ ì¶œë ¥í•œë‹¤.
    -   [x] condition ì¡°ê±´ì€ = , >, < ë¥¼ êµ¬í˜„í•œë‹¤.
    -   [x] condition ì€ ì»¬ëŸ¼ ì¤‘ì— í•˜ë‚˜ë§Œ ë„£ì„ ìˆ˜ ìˆë‹¤.

6.  DROP ìš”ì²­

    ```sql
    DROP table_name BTTP
    ```

    -   [x] í…Œì´ë¸” ì´ë¦„(table_name)ê³¼ ë™ì¼í•œ CSV íŒŒì¼ë„ ê°™ì´ ì‚­ì œí•œë‹¤.

## ë¬¸ì œ í•´ê²° ê³¼ì •

### ìš”êµ¬ì‚¬í•­ ë¶„ì„

-   BTTP

    ì´ë ‡ê²Œ ë¶„ë¦¬ í•´ì•¼ê² ë‹¤

    1.  íŒŒì¼ ì‹œìŠ¤í…œ ì½ê¸°
    2.  BTTP? ë¡œ íŒ¨í‚¤ì§•í•´ì„œ ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬
    3.  íŒŒì¼ DBSë¡œ ì§ˆì˜

-   **insert**._success_.**bttp** &larr; íŒŒì¼ ì´ë¦„ìœ¼ë¡œ ì¶”ì •

    1. insert &larr; sql ëª…ë ¹ë¬¸ìœ¼ë¡œ ì¶”ì •
    2. success &larr; êµ¬ë¶„ ì´ë¦„ìœ¼ë¡œ ì¶”ì •, ì™œ successë¼ëŠ” ì´ë¦„ì„ ì“´ê±°ì•¼? ğŸ¤¨
    3. bttp &larr; bttp? í”„ë¡œí† ì½œ ë§í•˜ë‚˜ë´„ ğŸ¤¨

-   _íŒŒì¼ì—ì„œ ì½ì€ ë‚´ìš©_
    -   íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ ì½ê³  SaaS DBS í˜¸ì¶œí•˜ë“¯ ì‚¬ìš©í•˜ë¼ëŠ”ê±´ê°€...?

### ì„¤ê³„

#### íŒŒì¼ì‹œìŠ¤í…œ ë°ì´í„°ë² ì´ìŠ¤ ìš©ì–´ ì •ë¦¬

| íŒŒì¼ ì‹œìŠ¤í…œ | ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ë§ | ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ |
| ----------- | ------------------- | ------------------- |
| File        | Entity              | Table               |
| Record      | Tuple               | Row                 |
| Key         | Id                  | Primary Key         |
| Field       | Attribute           | Column              |

#### ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

```mermaid
sequenceDiagram
    participant Client
    participant Server
    participant FQS
    participant FileSystem

    Client->>Server: bttp.request [Header, Body]
    Server->>FQS: query(Header.query_type)
    FQS->>FileSystem: read()
    FileSystem->>FQS: file
    FQS->>FQS: process()
    FQS->>FileSystem: write()
    FQS->>Server: data
    Server->>Client: bttp.response [Header, Body]

```

#### ì„œë²„-í´ë¼ì´ì–¸íŠ¸ êµ¬ì¡° êµ¬ë¶„

```
day16
â”œâ”€ client.ts
â”œâ”€ client
â”‚  â”œâ”€ parser
â”‚  â”‚  â”œâ”€ parser.condition.ts
â”‚  â”‚  â”œâ”€ parser.header.ts
â”‚  â”‚  â”œâ”€ parser.record.ts
â”‚  â”‚  â”œâ”€ parser.restore.ts
â”‚  â”‚  â”œâ”€ parser.schema.ts
â”‚  â”‚  â””â”€ parser.type.ts
â”‚  â”œâ”€ run.ts
â”‚  â””â”€ utils.ts
â”œâ”€ network
â”‚  â”œâ”€ bttp.Request.ts
â”‚  â”œâ”€ bttp.Request.type.ts
â”‚  â”œâ”€ bttp.Response.ts
â”‚  â””â”€ bttp.Response.type.ts
â”œâ”€ server.ts
â””â”€ server
   â”œâ”€ File.ts
   â”œâ”€ File
   â”‚  â”œâ”€ File.read.ts
   â”‚  â”œâ”€ File.type.ts
   â”‚  â””â”€ File.write.ts
   â”œâ”€ fqs
   â”‚  â”œâ”€ fqs.create.ts
   â”‚  â”œâ”€ fqs.delete.ts
   â”‚  â”œâ”€ fqs.drop.ts
   â”‚  â”œâ”€ fqs.insert.ts
   â”‚  â”œâ”€ fqs.select.ts
   â”‚  â”œâ”€ fqs.ts
   â”‚  â””â”€ fqs.update.ts
   â””â”€ fqs.ts
```

### ê²°ê³¼

![query1](https://gist.github.com/user-attachments/assets/d759b085-878a-441e-a218-1f8c536126f0) ![query2](https://gist.github.com/user-attachments/assets/d4e9b393-dfda-4d65-8aa1-10609bc0da60)  
![data](https://gist.github.com/user-attachments/assets/c434f429-cad7-40de-8335-3d4e8a7eac52)
![meta](https://gist.github.com/user-attachments/assets/ef7a1769-47d0-4f88-bd08-ddef680f5f20)

## í•™ìŠµ ë©”ëª¨

[Vorpal](https://vorpal.js.org/)  
[json2csv](https://mircozeiss.com/json2csv/)  
[Papa Parse](https://www.papaparse.com/docs#json-to-csv)
